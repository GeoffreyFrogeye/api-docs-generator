/api/v1/accounts:
  get:
    tags:
      - accounts
    summary: List all accounts.
    description: |
      This endpoint returns a list of all the accounts owned by the authenticated user.
    operationId: getAccounts
    parameters:
    - in: query
      name: page
      description: Page number. The default pagination is per 50 items.
      required: false
      schema:
        type: integer
        example: 1
    - in: query
      name: date
      description: |
        A date formatted YYYY-MM-DD. When added to the request, Firefly III will show the account's balance on that day.
      required: false
      schema:
        type: string
    - in: query
      name: type
      description: Optional filter on the account type(s) returned
      required: false
      schema:
        type: string
        enum:
          - all
          - asset
          - cash
          - expense
          - revenue
          - special
          - hidden
          - liability
          - liabilities
          - cc
          - creditcard
          - credit card
          - Default account
          - Cash account
          - Asset account
          - Expense account
          - Revenue account
          - Initial balance account
          - Beneficiary account
          - Import account
          - Reconciliation account
          - Loan
          - Debt
          - Mortgage
          - Credit card
    responses:
      '200':
        description: A list of accounts
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Account'
  post:
    tags:
      - accounts
    summary: Create new account.
    operationId: storeAccount
    description: Creates a new account. The data required can be submitted as a JSON body or as a list of parameters (in key=value pairs, like a webform).
    responses:
      '200':
        description: 'New account stored, result in response.'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Account'
      '422':
        description: 'Validation errors (see body)'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidationError'
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountUpdate'
        application/x-www-form-urlencoded:
          schema:
            $ref: '#/components/schemas/AccountUpdate'
      description: JSON array with the necessary account information or key=value pairs. See the model for the exact specifications.
      required: true
/api/v1/accounts/{id}:
  get:
    tags:
    - accounts
    summary: Get single account.
    description: |
      Returns a single account by its ID.
    operationId: getAccount
    parameters:
    - in: path
      name: id
      required: true
      schema:
        type: integer
        example: 1
      description: The ID of the account.
    - in: query
      name: page
      description: Page number. The default pagination is per 50 items.
      required: false
      schema:
        type: integer
        example: 1
    - in: query
      name: date
      description: |
        A date formatted YYYY-MM-DD. When added to the request, Firefly III will show the account's balance on that day.
      required: false
      schema:
        type: string
    responses:
      '200':
        description: 'The requested account'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Account'
      '404':
        description: Account not found
  put:
    summary: Update existing account.
    description: |
      Used to update a single account. All fields that are not submitted will be cleared (set to NULL). The model will tell you which fields are mandatory.
    operationId: updateAccount
    parameters:
    - in: path
      name: id
      required: true
      schema:
        type: integer
        example: 1
      description: The ID of the account.
    tags:
      - accounts
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountUpdate'
        application/x-www-form-urlencoded:
          schema:
            $ref: '#/components/schemas/AccountUpdate'
      description: JSON array or formdata with updated account information. See the model for the exact specifications.
      required: true
    responses:
      '200':
        description: 'Updated account stored, result in response'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Account'
      '422':
        description: 'Validation errors (see body)'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidationError'
  delete:
    summary: Permanently delete account.
    description: |
      Will permanently delete an account. Any associated transactions and piggy banks are ALSO deleted. Cannot be recovered from.
    operationId: deleteAccount
    parameters:
    - in: path
      name: id
      required: true
      schema:
        type: integer
        example: 1
      description: The ID of the account.
    tags:
      - accounts
    responses:
      '204':
        description: Account deleted
      '404':
        description: No such account
/api/v1/accounts/{id}/piggy_banks:
  get:
    tags:
      - accounts
    summary: List all piggy banks related to the account.
    description: |
      This endpoint returns a list of all the piggy banks connected to the account.
    operationId: getPiggiesByAccount
    parameters:
    - in: path
      name: id
      required: true
      schema:
        type: integer
        example: 1
      description: The ID of the account.
    - in: query
      name: page
      description: Page number. The default pagination is per 50 items.
      required: false
      schema:
        type: integer
    responses:
      '200':
        description: A list of piggy banks
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/PiggyBank'
/api/v1/accounts/{id}/transactions:
  get:
    tags:
      - accounts
    summary: List all transactions related to the account.
    description: |
      This endpoint returns a list of all the transactions connected to the account.
    operationId: getTransactionsByAccount
    parameters:
    - in: path
      name: id
      required: true
      schema:
        type: integer
        example: 1
      description: The ID of the account.
    - in: query
      name: page
      description: Page number. The default pagination is per 50 items.
      required: false
      schema:
        type: integer
        example: 1
    - in: query
      name: start_date
      description: |
        A date formatted YYYY-MM-DD. X
      required: false
      schema:
        type: string
        example: 2018-09-17
    - in: query
      name: end_date
      description: |
        A date formatted YYYY-MM-DD. X
      required: false
      schema:
        type: string
        example: 2018-09-17
    - in: query
      name: type
      description: Optional filter on the transaction type(s) returned.
      required: false
      schema:
        type: string
        enum:
        - all
        - withdrawal
        - withdrawals
        - expense
        - deposit
        - deposits
        - income
        - transfer
        - transfers
        - opening_balance
        - reconciliation
        - special
        - specials
        - default
    responses:
      '200':
        description: A list of transactions
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/Transaction'